<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Treasure Hunt Love Game</title>

<!-- TAILWIND CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
    @keyframes confetti {
      0% { transform: translateY(-100vh) rotate(0deg); }
      100% { transform: translateY(100vh) rotate(720deg); }
    }
    @keyframes bounce-in {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    .bounce-in { animation: bounce-in 0.6s ease-out; }
    .confetti {
      position: absolute; width: 10px; height: 10px;
      animation: confetti 3s linear infinite;
    }
</style>

</head>
<body class="m-0 p-0">

<!-- MAIN CONTAINER -->
<div id="app"></div>

<script>
// -------------------------
// GAME STATE
// -------------------------
let currentStep = 0;
let showTreasure = false;
let noClickCount = 0;
let maybeClickCount = 0;
let lastClicked = null;
let showCelebration = false;
let noButtonPos = { x: 0, y: 0 };
let maybeButtonPos = { x: 0, y: 0 };

const treasureSteps = [
  { 
    title: "Step 1", 
    message: "We matched on Schmooze", 
    subtitle: "Best swipe ever? ğŸ˜",
    bg: "from-blue-400 to-cyan-300"
  },
  { 
    title: "Step 2", 
    message: "Our DMs hit different", 
    subtitle: "Instagram chats >>> ğŸ’¬",
    bg: "from-purple-400 to-pink-300"
  },
  { 
    title: "Step 3", 
    message: "Vibes been immaculate", 
    subtitle: "Not gonna lie ğŸ”¥",
    bg: "from-pink-400 to-rose-300"
  },
  { 
    title: "Step 4", 
    message: "So here's the question...", 
    subtitle: "Time to find out ğŸ‘€",
    bg: "from-amber-400 to-yellow-300"
  },
];

const noMessages = [
  { title: "Wait wait! ğŸ˜…", message: "Did you click wrong?", emoji: "ğŸ¥º" },
  { title: "Still thinking? ğŸ™„", message: "Unlimited food dates too!", emoji: "ğŸ•" },
  { title: "Fine! ğŸ’†â€â™€ï¸", message: "I'll wash your hair every weekend!", emoji: "ğŸ’‡â€â™€ï¸" },
  { title: "Not convinced? ğŸ“¸", message: "I'll join fit checks!", emoji: "âœ¨" },
  { title: "Yaar you're testing me ğŸ˜©", message: "I'll listen to your 3am thoughts!", emoji: "ğŸŒ™" },
  { title: "Enough! ğŸ˜‚", message: "No more options!", emoji: "ğŸ˜¤" }
];

const maybeMessages = [
  { title: "Maybe? MAYBE?! ğŸ˜¤", message: "I need a real answer!", emoji: "ğŸ¤¨" },
  { title: "Still thinking? ğŸ™„", message: "Unlimited food dates too!", emoji: "ğŸ•" },
  { title: "Fine! ğŸ’†â€â™€ï¸", message: "I'll wash your hair every weekend!", emoji: "ğŸ’‡â€â™€ï¸" },
  { title: "Not convinced? ğŸ“¸", message: "I'll join fit checks!", emoji: "âœ¨" },
  { title: "Testing me ğŸ˜©", message: "I'll listen to your 3am thoughts!", emoji: "ğŸŒ™" },
  { title: "Enough! ğŸ˜‚", message: "Maybe option removed!", emoji: "ğŸ˜¤" }
];

// -------------------------
// RENDER FUNCTIONS
// -------------------------

function render() {
  const app = document.getElementById("app");

  // Celebration Page
  if (showCelebration) {
    app.innerHTML = celebrationPage();
    spawnConfetti();
    return;
  }

  // Treasure Question Page
  if (showTreasure) {
    app.innerHTML = treasurePage();
    return;
  }

  // Step screens
  app.innerHTML = stepPage();
}

// -------------------------
// HTML SCREENS
// -------------------------

function stepPage() {
  const step = treasureSteps[currentStep];
  const progress = ((currentStep + 1) / treasureSteps.length) * 100;

  return `
  <div class="min-h-screen bg-gradient-to-br ${step.bg} flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-lg w-full text-center">
      
      <div class="mb-8">
        <div class="flex justify-between text-sm font-bold mb-2">
          <span>${step.title}</span>
          <span>${currentStep+1}/${treasureSteps.length}</span>
        </div>
        <div class="h-2 bg-gray-200 rounded-full">
          <div class="h-full bg-gradient-to-r from-pink-500 to-purple-500" style="width:${progress}%"></div>
        </div>
      </div>
      
      <h2 class="text-4xl font-bold mb-4">${step.message}</h2>
      <p class="text-xl text-gray-600 mb-8">${step.subtitle}</p>

      <button onclick="nextStep()" class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-12 py-4 rounded-full font-bold shadow-lg hover:scale-105 transition">
        ${currentStep < treasureSteps.length - 1 ? "Next â†’" : "Let's see! ğŸ‘€"}
      </button>
    </div>
  </div>
  `;
}

function treasurePage() {
  const totalClicks = Math.max(noClickCount, maybeClickCount);
  const showOnlyYes = totalClicks >= 6;
  const runAway = totalClicks === 5;

  let msg = "";
  if (lastClicked === "no") {
    msg = noMessages[Math.min(noClickCount - 1, noMessages.length - 1)];
  } else if (lastClicked === "maybe") {
    msg = maybeMessages[Math.min(maybeClickCount - 1, maybeMessages.length - 1)];
  }

  // First time screen
  if (totalClicks === 0) {
    return `
    <div class="min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-orange-300 flex items-center justify-center p-4">
      <div class="bg-white rounded-3xl shadow-2xl p-10 max-w-xl text-center bounce-in">

        <div class="text-8xl mb-6">ğŸ</div>

        <h1 class="text-4xl font-bold mb-6">Alright, here it is...</h1>

        <p class="text-2xl text-gray-700 mb-4">Talking to you has been really fun</p>
        <p class="text-2xl text-gray-700 mb-8">So... let's make it official?</p>

        <div class="bg-white rounded-xl p-6 shadow-lg mb-8">
          <p class="text-5xl mb-4">ğŸ˜Š</p>
          <p class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
            Be my girlfriend?
          </p>
        </div>

        <div class="flex gap-3 justify-center flex-wrap">
          <button onclick="sayYes()" class="bg-green-500 text-white px-10 py-4 rounded-full text-xl font-bold hover:scale-110">YES ğŸ’š</button>
          <button onclick="sayMaybe()" class="bg-yellow-400 text-white px-10 py-4 rounded-full text-xl font-bold hover:scale-110">Maybe ğŸ¤”</button>
          <button onclick="sayNo()" class="bg-gray-300 text-gray-700 px-10 py-4 rounded-full text-xl font-bold hover:scale-110">No ğŸ˜¬</button>
        </div>

      </div>
    </div>`;
  }

  // Only YES
  if (showOnlyYes) {
    return `
    <div class="min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-orange-300 flex items-center justify-center p-4">
      <div class="bg-white rounded-3xl shadow-2xl p-10 text-center bounce-in">
        <div class="text-8xl mb-6">ğŸ˜¤</div>
        <h1 class="text-4xl font-bold mb-4">That's Enough! ğŸ˜‚</h1>
        <p class="text-2xl text-gray-700 mb-8">Only one option left now ğŸ˜</p>

        <button onclick="sayYes()" class="bg-green-500 text-white px-16 py-5 rounded-full text-2xl font-bold animate-pulse hover:scale-110">
          YES ğŸ’š
        </button>
      </div>
    </div>`;
  }

  // Messages + Buttons
  return `
  <div class="min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-orange-300 flex items-center justify-center p-4">
    <div class="bg-white rounded-3xl shadow-2xl p-10 max-w-xl text-center bounce-in">

      <div class="text-8xl mb-6">${msg.emoji}</div>
      <h1 class="text-4xl font-bold mb-4">${msg.title}</h1>
      <p class="text-2xl text-gray-700 mb-6">${msg.message}</p>

      ${runAway ? runawayButtons() : normalButtons()}
    </div>
  </div>
  `;
}

function runawayButtons() {
  return `
  <div class="relative" style="min-height:200px;">
    <button onclick="sayYes()" class="bg-green-500 text-white px-10 py-4 rounded-full text-xl font-bold hover:scale-110">
      YES ğŸ’š
    </button>

    <button id="maybeBtn"
      class="absolute bg-yellow-400 text-white px-8 py-3 rounded-full font-bold shadow-lg"
      onmouseover="moveButton('maybe')" ontouchstart="moveButton('maybe')"
      style="left:${maybeButtonPos.x}px; top:${maybeButtonPos.y}px;">
      Maybe ğŸ¤”
    </button>

    <button id="noBtn"
      class="absolute bg-gray-300 text-gray-700 px-8 py-3 rounded-full font-bold shadow-lg"
      onmouseover="moveButton('no')" ontouchstart="moveButton('no')"
      style="left:${noButtonPos.x}px; top:${noButtonPos.y}px;">
      No ğŸ˜¬
    </button>
  </div>`;
}

function normalButtons() {
  return `
  <div class="flex gap-3 justify-center flex-wrap">
    <button onclick="sayYes()" class="bg-green-500 text-white px-10 py-4 rounded-full text-xl font-bold hover:scale-110">YES ğŸ’š</button>
    
    <button onclick="sayMaybe()" class="bg-yellow-400 text-white px-8 py-3 rounded-full text-lg font-bold hover:scale-105">
      Still maybe...
    </button>

    <button onclick="sayNo()" class="bg-gray-300 text-gray-700 px-8 py-3 rounded-full text-lg font-bold hover:scale-105">
      Still no...
    </button>
  </div>`;
}

function celebrationPage() {
  return `
  <div class="min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-orange-300 flex items-center justify-center p-4 relative overflow-hidden">

    <div class="bg-white rounded-3xl shadow-2xl p-10 max-w-xl text-center bounce-in relative z-10">

      <div class="text-8xl mb-6 animate-bounce">ğŸ‰</div>
      <h1 class="text-5xl font-bold mb-6">YESSS! ğŸ”¥</h1>

      <p class="text-2xl text-gray-700">She said YES!</p>
      <p class="text-lg text-gray-600 mb-6">I knew you'd come around ğŸ˜</p>

      <div class="text-6xl mb-4">ğŸ’•</div>

      <button onclick="restart()" class="bg-gradient-to-r from-pink-500 to-purple-500 text-white px-10 py-4 rounded-full text-xl font-bold">
        Play Again
      </button>
    </div>
  </div>
  `;
}

// -------------------------
// ACTION FUNCTIONS
// -------------------------

function nextStep() {
  if (currentStep < treasureSteps.length - 1) {
    currentStep++;
  } else {
    showTreasure = true;
  }
  render();
}

function sayNo() {
  noClickCount++;
  maybeClickCount++;
  lastClicked = "no";
  render();
}

function sayMaybe() {
  maybeClickCount++;
  noClickCount++;
  lastClicked = "maybe";
  render();
}

function sayYes() {
  showCelebration = true;
  render();
}

function restart() {
  currentStep = 0;
  showTreasure = false;
  showCelebration = false;
  noClickCount = 0;
  maybeClickCount = 0;
  lastClicked = null;
  render();
}

function moveButton(type) {
  const maxX = window.innerWidth - 200;
  const maxY = window.innerHeight - 200;
  const newX = Math.random() * maxX;
  const newY = Math.random() * maxY;

  if (type === "no") {
    noButtonPos = { x: newX, y: newY };
  } else {
    maybeButtonPos = { x: newX, y: newY };
  }
  render();
}

// CONFETTI
function spawnConfetti() {
  for (let i = 0; i < 30; i++) {
    const c = document.createElement("div");
    c.classList.add("confetti");
    c.style.left = `${Math.random() * 100}%`;
    c.style.backgroundColor = ["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#6c5ce7"][i % 5];
    c.style.animationDelay = `${Math.random() * 2}s`;
    document.body.appendChild(c);
  }
}

// Start App
render();
</script>

</body>
</html>
